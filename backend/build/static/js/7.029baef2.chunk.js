(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{121:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(126);t.a=function(e){return l.a.createElement("div",{className:"profileModal"},e.children)}},122:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(127);t.a=function(e){return e.show?l.a.createElement("div",{className:"backdrop",onClick:e.clicked},e.children):null}},123:function(e,t,a){"use strict";var n=a(0),l=a.n(n);a(125);t.a=function(e){var t,a=null,n=[];switch(e.touched&&e.invalid&&(n.push("invalid"),t=e.errorMessage),!e.touched||e.invalid||e.invalidN||(n.push("valid"),t=""),e.touched&&e.invalidN&&(n.push("invalid-newpost"),t=e.errorMessage),!e.touched||e.invalidN||e.invalid||(n.push("valid-newpost"),t=""),e.elementType){case"input":a=l.a.createElement(l.a.Fragment,null,l.a.createElement("input",Object.assign({value:e.value},e.elementConfig,{onChange:e.changed,className:n.join(" ")})));break;case"textarea":a=l.a.createElement(l.a.Fragment,null,l.a.createElement("textarea",Object.assign({},e.elementConfig,{onChange:e.changed,className:n.join(" "),value:e.value})));break;case"select":a=l.a.createElement("select",{value:e.value,onChange:e.changed},e.elementConfig.options.map(function(e){return l.a.createElement("option",{value:e.value},e.displayValue)}));break;default:a=l.a.createElement("input",Object.assign({value:e.value},e.elementConfig,{onChange:e.changed}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",null,e.label),a,l.a.createElement("p",{style:{color:"red"}},t))}},124:function(e,t,a){"use strict";var n=a(8),l=a(9),r=a(11),o=a(10),i=a(12),s=a(0),u=a.n(s),c=a(121),d=a(122);a(128);t.a=function(e,t){return function(a){function s(){var e,t;Object(n.a)(this,s);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(t=Object(r.a)(this,(e=Object(o.a)(s)).call.apply(e,[this].concat(l)))).state={error:null},t.closeBackdrop=function(){t.setState({error:null})},t}return Object(i.a)(s,a),Object(l.a)(s,[{key:"componentWillMount",value:function(){var e=this;this.reqInterceptor=t.interceptors.request.use(function(t){return e.setState({error:null}),t}),this.resInterceptor=t.interceptors.response.use(function(e){return e},function(t){e.setState({error:t})})}},{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptor),t.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){var t;return t=this.state.error?this.state.error.response.data.errors[0].message:null,u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,{show:this.state.error,clicked:this.closeBackdrop},u.a.createElement(c.a,null,u.a.createElement("div",{className:"error"},u.a.createElement("h1",null,"An Error Occurred"),u.a.createElement("div",{className:"editProfile__icon",onClick:this.closeBackdrop},u.a.createElement("i",{className:"fas fa-times-circle"})),u.a.createElement("p",null,t)))),u.a.createElement(e,this.props))}}]),s}(s.Component)}},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){e.exports=a.p+"static/media/avatar.b23d5960.jpg"},212:function(e,t,a){"use strict";a.r(t);var n=a(23),l=a(8),r=a(9),o=a(11),i=a(10),s=a(12),u=a(0),c=a.n(u),d=a(122),m=a(121),f=(a(159),a(27)),p=a(123),h=a(39),v=(a(160),a(15)),_=(a(161),function(e){return c.a.createElement("div",{className:"userProfile__user-flex"},c.a.createElement("div",{className:"userProfile__user-flex__photo"},c.a.createElement("img",{src:e.photo,alt:"user"})),c.a.createElement("div",{className:"userProfile__user-flex__details"},c.a.createElement("p",null,"Name: ",c.a.createElement("span",null,e.name)),c.a.createElement("p",null,"Email: ",c.a.createElement("span",null,e.email)),c.a.createElement("p",null,"Joined: ",c.a.createElement("span",null,e.date)),c.a.createElement("div",{className:"userProfile__user-flex__details__buttons-flex"},e.token&&e.userId===e.profileUserId?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"userProfile__user-flex__details__buttons-flex__link"},c.a.createElement(v.b,{to:"/newpost"},"Create Post")),c.a.createElement("div",{className:"userProfile__user-flex__details__buttons-flex__link"},c.a.createElement(f.a,{type:"button",click:e.viewBackdrop},"Edit Profile"))):null,e.token&&e.userId!==e.profileUserId?c.a.createElement("div",{className:"userProfile__user-flex__details__buttons-flex__link"},c.a.createElement(f.a,{type:"button",click:e.followUser,disabled:e.followButtonClicked},c.a.createElement("input",{type:"checkbox",className:"followInput"}),c.a.createElement("i",{className:"fas fa-plus"})," ",e.followed?"Unfollow":"Follow")):null)))}),g=a(13),w=a.n(g),E=a(28),k=a(14),b=a(124),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).signal=w.a.CancelToken.source(),a.state={viewBackdrop:!1,viewModal:!1,imageSelected:null,editprofileForm:{name:{elementType:"input",elementConfig:{placeholder:"Type Your Name Here",type:"text",name:"name",label:"Name"},value:"",valid:!1,validationRules:{required:!0},touched:!1,errorMessage:"This Field is Required!"},email:{elementType:"input",elementConfig:{placeholder:"Type Your Email Here",type:"email",name:"email",label:"Email"},value:"",valid:!1,validationRules:{required:!0,emailValid:!0},touched:!1,errorMessage:"Invalid Email"},password:{elementType:"input",elementConfig:{placeholder:"Type Your Password Here",type:"password",name:"password",label:"Password"},value:"",valid:!1,validationRules:{required:!0,minLength:!0},touched:!1,errorMessage:"Password should have at least 8 characters"},confirm_password:{elementType:"input",elementConfig:{placeholder:"Confirm Your Password",type:"password",name:"confirmpassword",label:"Confirm Password"},value:"",valid:!1,validationRules:{required:!0,passwordMatch:!0},touched:!1,errorMessage:"Passwords Do Not Match"},Photo:{elementType:"input",elementConfig:{type:"file",name:"image",label:"Pick Your Profile Photo"},validationRules:{required:!0},value:"",valid:!0,errorMessage:""}},formIsValid:!1,file:null,user:null,buttonClicked:!1,followed:!1,followButtonClicked:!1},a.changeInput=function(e,t){var l=Object(n.a)({},a.state.editprofileForm),r=l[t];if("Photo"===t){var o=e.target.files[0];a.setState({file:o,imageSelected:URL.createObjectURL(o)})}r.value=e.target.value,r.touched=!0,"password"===t&&(l.confirm_password.value="",l.confirm_password.valid=!1),"confirm_password"===t?r.value===l.password.value?r.valid=!0:r.valid=!1:r.valid=a.checkValidity(r.validationRules,r.value),l[t]=r;var i=!0;for(var s in l)i=l[s].valid&&i;a.setState({editprofileForm:l,formIsValid:i})},a.checkValidity=function(e,t){var a=!0;if(e.required&&(a=""!==t.trim()&&a),e.emailValid){a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&a}return e.minLength&&(a=t.length>=8&&a),a},a.viewBackdrop=function(){var e=Object(n.a)({},a.state.editprofileForm),t=e.name;t.value=a.state.user.name,t.valid=!0,e.name=t;var l=e.email;return l.value=a.state.user.email,l.valid=!0,e.email=l,a.setState({viewBackdrop:!0,viewModal:!0,editProfileForm:e,imageSelected:a.state.user.photo})},a.closeBackdrop=function(){a.setState({viewBackdrop:!1,viewModal:!1})},a.onGoToPost=function(e){a.signal.cancel("cancelled"),localStorage.setItem("post",JSON.stringify(e)),a.props.history.push({pathname:"/post/"+e._id,postId:e._id})},a.editProfile=function(e){e.preventDefault(),a.setState(function(e){return{editProfileForm:Object(n.a)({},e.editProfileForm,{photo:Object(n.a)({},e.editProfileForm.photo,{value:""})})}}),a.setState({buttonClicked:!0});var t=new FormData;return t.append("image",a.state.file),w.a.put("/insertupdatePostImage",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){var t,l=e.data.filePath;t="notFound"===l?a.state.user.photo:l;var r={query:"\n                    mutation EditUserProfile($id: String!, $name: String!, $email: String!, $password: String, $photo: String!) {\n                        editUserProfile(editProfileInput: {\n                            id: $id,\n                            name: $name,\n                            email: $email,\n                            password: $password,\n                            photo: $photo\n                          }) {\n                            _id\n                            name\n                            email\n                            photo\n                            createdAt\n                            posts {\n                                _id\n                                title\n                            }\n                          }\n                    }\n                ",variables:{id:a.props.match.params.id,name:a.state.editprofileForm.name.value,email:a.state.editprofileForm.email.value,password:a.state.editprofileForm.password.value,photo:t}};return w.a.post("/graphql",r,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){var l=e.data.data.editUserProfile,r=Object(n.a)({},a.state.user);r.email=l.email,r.password=l.password,r.name=l.name,r.photo=t,a.setState({buttonClicked:!1,viewBackdrop:!1,viewModal:!1,user:r})})})},a.followUser=function(){var e;return a.setState({followButtonClicked:!0}),e=a.state.followed?{query:"\n                    mutation UnfollowUser($userId: String!) {\n                        unFollowUser(userId: $userId) {\n                            _id\n                            name\n                        }\n                    }\n                ",variables:{userId:a.state.user._id}}:{query:"\n                    mutation FollowUser($userId: String!) {\n                        followUser(userId: $userId) {\n                            _id\n                            name\n                        }\n                    }\n                ",variables:{userId:a.state.user._id}},w.a.post("/graphql",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){if(a.setState({followButtonClicked:!1}),e.data.data.followUser){a.setState({followed:!0}),document.querySelector(".userProfile__user-flex__details__buttons-flex__link button").style.backgroundColor="green";var t=Object(n.a)({},a.state.user);t.followers.push(e.data.data.followUser),a.setState({user:t})}else{a.setState({followed:!1}),document.querySelector(".userProfile__user-flex__details__buttons-flex__link button").style.backgroundColor="#05386B";var l=Object(n.a)({},a.state.user),r=l.followers.filter(function(e){return e._id!==a.props.userId});l.followers=r,a.setState({user:l})}})},a.onGoTofollowerProfile=function(e){a.props.history.push("/userprofile/"+e);var t={query:"\n                query SingleUser($userId: String!) {\n                    singleUser(userId: $userId) {\n                        _id\n                        name\n                        email\n                        photo\n                        createdAt\n                        posts {\n                            _id\n                            title\n                            likes {\n                                _id\n                                name\n                            }\n                        }\n                        followers {\n                            _id\n                            name\n                        }\n                        following {\n                            _id\n                            name\n                        }\n                    }\n                }\n            ",variables:{userId:e}};return w.a.post("/graphql",t,{headers:{"Content-Type":"application/json"},cancelToken:a.signal.token}).then(function(e){var t=e.data.data.singleUser;if(t.followers.length<=0){a.setState({followed:!1});var n=document.querySelector(".userProfile__user-flex__details__buttons-flex__link button"),l=document.querySelector('input[class="followInput"]');l&&(l.checked=!1,n.style.backgroundColor="#05386B")}a.setState({user:t}),t.followers.forEach(function(e){e._id===a.props.userId&&(a.setState({followed:!0}),document.querySelector(".userProfile__user-flex__details__buttons-flex__link button").style.backgroundColor="green")})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={query:"\n                query SingleUser($userId: String!) {\n                    singleUser(userId: $userId) {\n                        _id\n                        name\n                        email\n                        photo\n                        createdAt\n                        posts {\n                            _id\n                            title\n                            likes {\n                                _id\n                                name\n                            }\n                        }\n                        followers {\n                            _id\n                            name\n                        }\n                        following {\n                            _id\n                            name\n                        }\n                    }\n                }\n            ",variables:{userId:this.props.match.params.id}};return w.a.post("/graphql",t,{headers:{"Content-Type":"application/json"},cancelToken:this.signal.token}).then(function(t){var a=t.data.data.singleUser;e.setState({user:a}),a.followers.forEach(function(t){if(t._id===e.props.userId){e.setState({followed:!0});var a=document.querySelector(".userProfile__user-flex__details__buttons-flex__link button");document.querySelector('input[class="followInput"]').checked=!0,a.style.backgroundColor="green"}})})}},{key:"componentWillUnmount",value:function(){this.signal.cancel("cancelled")}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.editprofileForm)t.push({id:a,config:this.state.editprofileForm[a]});return null===this.state.user?c.a.createElement(E.a,null):c.a.createElement("div",{className:"userProfile"},c.a.createElement("h1",null,"Profile"),c.a.createElement(_,{viewBackdrop:this.viewBackdrop,photo:this.state.user.photo,name:this.state.user.name,email:this.state.user.email,date:this.state.user.createdAt,token:this.props.token,userId:this.props.userId,profileUserId:this.state.user._id,followUser:this.followUser,followed:this.state.followed,followButtonClicked:this.state.followButtonClicked}),c.a.createElement("hr",null),c.a.createElement("div",{className:"userProfile__userActivities-flex"},c.a.createElement("div",{className:"userProfile__userActivities-flex__activity"},c.a.createElement("span",null,this.state.user.followers.length)," Followers",c.a.createElement("hr",null),c.a.createElement("ul",null,this.state.user.followers.map(function(t){return c.a.createElement("li",{key:t._id},c.a.createElement("span",{onClick:e.onGoTofollowerProfile.bind(e,t._id)},t.name))}))),c.a.createElement("div",{className:"userProfile__userActivities-flex__activity"},c.a.createElement("span",null,this.state.user.following.length)," Following",c.a.createElement("hr",null),c.a.createElement("ul",null,this.state.user.following.map(function(t){return c.a.createElement("li",{key:t._id},c.a.createElement("span",{onClick:e.onGoTofollowerProfile.bind(e,t._id)},t.name))}))),c.a.createElement("div",{className:"userProfile__userActivities-flex__activity"},c.a.createElement("span",null,this.state.user.posts.length)," Posts",c.a.createElement("hr",null),c.a.createElement("ul",null,this.state.user.posts.map(function(t){return c.a.createElement("li",{key:t._id},c.a.createElement("span",{onClick:e.onGoToPost.bind(e,t)},t.title))})))),c.a.createElement("hr",null),c.a.createElement(d.a,{show:this.state.viewBackdrop}),c.a.createElement(h.a,{mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:1e3,exit:500},in:this.state.viewModal,classNames:{enter:"",enterActive:"ModalOpen",exit:"",exitActive:"ModalClose"}},c.a.createElement(m.a,{viewModal:this.state.viewModal},c.a.createElement("h1",null,"Edit Your Profile"),c.a.createElement("div",{className:"editProfile__icon",onClick:this.closeBackdrop},c.a.createElement("i",{className:"fas fa-times-circle"})),c.a.createElement("form",{className:"editProfile__form"},t.map(function(t){return c.a.createElement("div",{key:t.id},c.a.createElement(p.a,{elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalidN:!t.config.valid,touched:t.config.touched,label:t.config.label,key:t.id,changed:function(a){return e.changeInput(a,t.id)},errorMessage:t.config.errorMessage}))}),this.state.imageSelected?c.a.createElement("img",{src:this.state.imageSelected,alt:"profileImage"}):null,c.a.createElement(f.a,{type:"submit",disabled:!this.state.formIsValid||this.state.buttonClicked,click:this.editProfile},"Edit Profile")))))}}]),t}(u.Component);t.default=Object(b.a)(Object(k.b)(function(e){return{userId:e.auth.userId,token:e.auth.token}})(y),w.a)}}]);
//# sourceMappingURL=7.029baef2.chunk.js.map